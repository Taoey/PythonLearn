import requests

iplist=['60.11.41.124:3128', '60.191.170.148:3128', '124.89.35.206:9999', '124.88.67.24:843', '124.133.230.254:80', '124.88.67.23:843', '202.106.16.36:3128', '60.191.164.83:3128', '203.91.121.74:3128', '124.88.67.17:843', '222.33.192.238:8118', '124.88.67.32:80', '124.88.67.54:80', '113.107.112.210:8101', '120.52.21.132:8082', '218.4.101.130:83', '220.161.218.94:3128', '124.206.167.250:3128', '183.62.196.10:3128', '122.226.62.90:3128', '218.67.126.15:3128', '101.251.199.66:3128', '60.21.132.218:63000', '1.82.216.135:80', '122.72.18.160:80', '223.68.1.38:8000', '121.248.112.20:3128', '61.162.223.41:9797', '218.17.252.34:3128', '218.22.65.60:60088']

print(len(iplist))
for i in iplist:
    try:
       req= requests.get('http://www.csdn.net/', proxies={"http":"http://{}".format(i)})
    except:
        print ('connect failed')
        iplist.remove(i)
    else:
        print ('success')
print(iplist)
print(len(iplist))